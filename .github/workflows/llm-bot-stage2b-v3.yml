bmFtZTogTExNIEJvdCAtIFN0YWdlIDJCIHY0CgpvbjoKICBpc3N1ZV9jb21tZW50OgogICAgdHlwZXM6IFtjcmVhdGVkXQogIHdvcmtmbG93X2Rpc3BhdGNoOgoKcGVybWlzc2lvbnM6CiAgY29udGVudHM6IHJlYWQKICBpZC10b2tlbjogd3JpdGUKICBpc3N1ZXM6IHdyaXRlCgpqb2JzOgogIHNtb2tlLXRlc3Q6CiAgICBpZjogZ2l0aHViLmV2ZW50X25hbWUgPT0gJ3dvcmtmbG93X2Rpc3BhdGNoJwogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAogICAgc3RlcHM6CiAgICAgIC0gbmFtZTogV29ya2Zsb3cgUmVnaXN0cmF0aW9uIFZlcmlmaWNhdGlvbgogICAgICAgIHJ1bjogfAogICAgICAgICAgZWNobyAiOjpub3RpY2U6OndvcmtmbG93X2Rpc3BhdGNoIHRlc3QgUEFTU0VEIgogICAgICAgICAgZWNobyAiRXZlbnQ6ICR7eyBnaXRodWIuZXZlbnRfbmFtZSB9fSIKICAgICAgICAgIGVjaG8gIkFjdG9yOiAke3sgZ2l0aHViLmFjdG9yIH19IgoKICBsbG0tcmVzcG9uc2U6CiAgICBpZjogZ2l0aHViLmV2ZW50X25hbWUgPT0gJ2lzc3VlX2NvbW1lbnQnICYmIGdpdGh1Yi5ldmVudC5pc3N1ZS5udW1iZXIgPT0gMjQKICAgIHJ1bnMtb246IHVidW50dS1sYXRlc3QKICAgIHRpbWVvdXQtbWludXRlczogNQogICAgc3RlcHM6CiAgICAgIC0gbmFtZTogQm90IEd1YXJkCiAgICAgICAgaWQ6IGJvdF9jaGVjawogICAgICAgIHJ1bjogfAogICAgICAgICAgaWYgWyAiJHt7IGdpdGh1Yi5ldmVudC5jb21tZW50LnVzZXIudHlwZSB9fSIgPT0gIkJvdCIgXTsgdGhlbgogICAgICAgICAgICBlY2hvICJza2lwPXRydWUiID4+ICRHSVRIVUJfT1VUUFVUCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGVjaG8gInNraXA9ZmFsc2UiID4+ICRHSVRIVUJfT1VUUFVUCiAgICAgICAgICBmaQoKICAgICAgLSBuYW1lOiBDb25jdXJyZW5jeSBMb2NrIENoZWNrCiAgICAgICAgaWQ6IGxvY2tfY2hlY2sKICAgICAgICBpZjogc3RlcHMuYm90X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnCiAgICAgICAgZW52OgogICAgICAgICAgR0hfVE9LRU46ICR7eyBnaXRodWIudG9rZW4gfX0KICAgICAgICBydW46IHwKICAgICAgICAgIExBQkVMUz0kKGdoIGFwaSByZXBvcy8ke3sgZ2l0aHViLnJlcG9zaXRvcnkgfX0vaXNzdWVzLzI0IC0tanEgJy5sYWJlbHNbXS5uYW1lJykKICAgICAgICAgIGlmIGVjaG8gIiRMQUJFTFMiIHwgZ3JlcCAtcSAiXnByb2Nlc3NpbmckIjsgdGhlbgogICAgICAgICAgICBlY2hvICJza2lwPXRydWUiID4+ICRHSVRIVUJfT1VUUFVUCiAgICAgICAgICAgIGVjaG8gIjo6bm90aWNlOjpTa2lwcGluZzogQW5vdGhlciB3b3JrZmxvdyBpcyBwcm9jZXNzaW5nIgogICAgICAgICAgICBDT01NRU5UPSJDb25jdXJyZW5jeSBMb2NrIEFjdGl2ZSAtIEFub3RoZXIgd29ya2Zsb3cgaXMgY3VycmVudGx5IHByb2Nlc3NpbmcuIFBsZWFzZSB3YWl0LiA8IS0tIFAzOF9DT05DVVJSRU5DWV9MT0NLOiBjb21tZW50XyR7eyBnaXRodWIuZXZlbnQuY29tbWVudC5pZCB9fSAtLT4iCiAgICAgICAgICAgIGdoIGFwaSAtLW1ldGhvZCBQT1NUIC1IICJBY2NlcHQ6IGFwcGxpY2F0aW9uL3ZuZC5naXRodWIranNvbiIgL3JlcG9zLyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9pc3N1ZXMvMjQvY29tbWVudHMgLWYgYm9keT0iJENPTU1FTlQiCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGVjaG8gInNraXA9ZmFsc2UiID4+ICRHSVRIVUJfT1VUUFVUCiAgICAgICAgICBmaQoKICAgICAgLSBuYW1lOiBBY3F1aXJlIExvY2sKICAgICAgICBpZDogYWNxdWlyZV9sb2NrCiAgICAgICAgaWY6IHN0ZXBzLmJvdF9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5sb2NrX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnCiAgICAgICAgZW52OgogICAgICAgICAgR0hfVE9LRU46ICR7eyBnaXRodWIudG9rZW4gfX0KICAgICAgICBydW46IHwKICAgICAgICAgIGdoIGFwaSAtLW1ldGhvZCBQT1NUIC9yZXBvcy8ke3sgZ2l0aHViLnJlcG9zaXRvcnkgfX0vaXNzdWVzLzI0L2xhYmVscyAtZiBsYWJlbHNbXT0icHJvY2Vzc2luZyIKICAgICAgICAgIGdoIGFwaSAtLW1ldGhvZCBERUxFVEUgL3JlcG9zLyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9pc3N1ZXMvMjQvbGFiZWxzL3F1ZXVlZCAyPi9kZXYvbnVsbCB8fCB0cnVlCiAgICAgICAgICBlY2hvICI6Om5vdGljZTo6TG9jayBhY3F1aXJlZCIKCiAgICAgIC0gbmFtZTogSWRlbXBvdGVuY3kgQ2hlY2sKICAgICAgICBpZDogaWRlbXBvdGVuY3lfY2hlY2sKICAgICAgICBpZjogc3RlcHMuYm90X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmxvY2tfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScKICAgICAgICBlbnY6CiAgICAgICAgICBHSF9UT0tFTjogJHt7IGdpdGh1Yi50b2tlbiB9fQogICAgICAgIHJ1bjogfAogICAgICAgICAgQ09NTUVOVF9JRD0iJHt7IGdpdGh1Yi5ldmVudC5jb21tZW50LmlkIH19IgogICAgICAgICAgTUFSS0VSPSJQMzhfSURFTVBPVEVOQ1lfS0VZOiBjb21tZW50XyR7Q09NTUVOVF9JRH0iCiAgICAgICAgICBGT1VORD0kKGdoIGFwaSByZXBvcy8ke3sgZ2l0aHViLnJlcG9zaXRvcnkgfX0vaXNzdWVzLzI0L2NvbW1lbnRzIC0tanEgIi5bXSB8IHNlbGVjdCguYm9keSB8IGNvbnRhaW5zKFwiJE1BUktFUlwiKSkgfCAuaWQiIHwgaGVhZCAtbiAxKQogICAgICAgICAgaWYgWyAtbiAiJEZPVU5EIiBdOyB0aGVuCiAgICAgICAgICAgIGVjaG8gInNraXA9dHJ1ZSIgPj4gJEdJVEhVQl9PVVRQVVQKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgZWNobyAic2tpcD1mYWxzZSIgPj4gJEdJVEhVQl9PVVRQVVQKICAgICAgICAgIGZpCgogICAgICAtIG5hbWU6IEFjY2VzcyBDb250cm9sCiAgICAgICAgaWQ6IGFjY2Vzc19jaGVjawogICAgICAgIGlmOiBzdGVwcy5ib3RfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMubG9ja19jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5pZGVtcG90ZW5jeV9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJwogICAgICAgIGVudjoKICAgICAgICAgIEdIX1RPS0VOOiAke3sgZ2l0aHViLnRva2VuIH19CiAgICAgICAgcnVuOiB8CiAgICAgICAgICBVU0VSTkFNRT0iJHt7IGdpdGh1Yi5ldmVudC5jb21tZW50LnVzZXIubG9naW4gfX0iCiAgICAgICAgICBQRVJNSVNTSU9OPSQoZ2ggYXBpIHJlcG9zLyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9jb2xsYWJvcmF0b3JzLyR7VVNFUk5BTUV9L3Blcm1pc3Npb24gLS1qcSAnLnBlcm1pc3Npb24nIDI+L2Rldi9udWxsIHx8IGVjaG8gIm5vbmUiKQogICAgICAgICAgaWYgW1sgIiRQRVJNSVNTSU9OIiA9PSAiYWRtaW4iIHx8ICIkUEVSTUlTU0lPTiIgPT0gIndyaXRlIiBdXTsgdGhlbgogICAgICAgICAgICBlY2hvICJza2lwPWZhbHNlIiA+PiAkR0lUSFVCX09VVFBVVAogICAgICAgICAgZWxzZQogICAgICAgICAgICBlY2hvICJza2lwPXRydWUiID4+ICRHSVRIVUJfT1VUUFVUCiAgICAgICAgICBmaQoKICAgICAgLSBuYW1lOiBDb21tYW5kIEd1YXJkCiAgICAgICAgaWQ6IGNvbW1hbmRfY2hlY2sKICAgICAgICBpZjogc3RlcHMuYm90X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmxvY2tfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuaWRlbXBvdGVuY3lfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuYWNjZXNzX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnCiAgICAgICAgcnVuOiB8CiAgICAgICAgICBCT0RZPSQoanEgLXIgJy5jb21tZW50LmJvZHknICIkR0lUSFVCX0VWRU5UX1BBVEgiKQogICAgICAgICAgaWYgZWNobyAiJEJPRFkiIHwgZ3JlcCAtcUUgJ15ccyovYXNrfF5ccyovcGxhbic7IHRoZW4KICAgICAgICAgICAgZWNobyAic2tpcD1mYWxzZSIgPj4gJEdJVEhVQl9PVVRQVVQKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgZWNobyAic2tpcD10cnVlIiA+PiAkR0lUSFVCX09VVFBVVAogICAgICAgICAgZmkKCiAgICAgIC0gbmFtZTogQ2hlY2tvdXQKICAgICAgICBpZDogY2hlY2tvdXQKICAgICAgICBpZjogc3RlcHMuYm90X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmxvY2tfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuaWRlbXBvdGVuY3lfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuYWNjZXNzX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmNvbW1hbmRfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScKICAgICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHY0CgogICAgICAtIG5hbWU6IEF1dGhlbnRpY2F0ZSB0byBHQ1AKICAgICAgICBpZDogYXV0aF9nY3AKICAgICAgICBpZjogc3RlcHMuYm90X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmxvY2tfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuaWRlbXBvdGVuY3lfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuYWNjZXNzX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmNvbW1hbmRfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScKICAgICAgICB1c2VzOiBnb29nbGUtZ2l0aHViLWFjdGlvbnMvYXV0aEB2MgogICAgICAgIHdpdGg6CiAgICAgICAgICB3b3JrbG9hZF9pZGVudGl0eV9wcm92aWRlcjogJ3Byb2plY3RzLzY3MzE2MTYxMDYzMC9sb2NhdGlvbnMvZ2xvYmFsL3dvcmtsb2FkSWRlbnRpdHlQb29scy9naXRodWItYWN0aW9ucy1wb29sL3Byb3ZpZGVycy9naXRodWItYWN0aW9ucy1wcm92aWRlcicKICAgICAgICAgIHNlcnZpY2VfYWNjb3VudDogJ2dpdGh1Yi1hY3Rpb25zLWxsbUBwcm9qZWN0LTM4LWFpLmlhbS5nc2VydmljZWFjY291bnQuY29tJwoKICAgICAgLSBuYW1lOiBHZXQgc2VjcmV0cwogICAgICAgIGlkOiBzZWNyZXRzCiAgICAgICAgaWY6IHN0ZXBzLmJvdF9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5sb2NrX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmlkZW1wb3RlbmN5X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmFjY2Vzc19jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5jb21tYW5kX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnCiAgICAgICAgdXNlczogZ29vZ2xlLWdpdGh1Yi1hY3Rpb25zL2dldC1zZWNyZXRtYW5hZ2VyLXNlY3JldHNAdjIKICAgICAgICB3aXRoOgogICAgICAgICAgc2VjcmV0czogfC0KICAgICAgICAgICAgQU5USFJPUElDX0FQSV9LRVk6cHJvamVjdC0zOC1haS9hbnRocm9waWMtYXBpLWtleQoKICAgICAgLSBuYW1lOiBTZXQgdXAgUHl0aG9uCiAgICAgICAgaWQ6IHNldHVwX3B5dGhvbgogICAgICAgIGlmOiBzdGVwcy5ib3RfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMubG9ja19jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5pZGVtcG90ZW5jeV9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5hY2Nlc3NfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuY29tbWFuZF9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJwogICAgICAgIHVzZXM6IGFjdGlvbnMvc2V0dXAtcHl0aG9uQHY1CiAgICAgICAgd2l0aDoKICAgICAgICAgIHB5dGhvbi12ZXJzaW9uOiAnMy4xMScKCiAgICAgIC0gbmFtZTogSW5zdGFsbCBkZXBzCiAgICAgICAgaWQ6IGluc3RhbGxfZGVwcwogICAgICAgIGlmOiBzdGVwcy5ib3RfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMubG9ja19jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5pZGVtcG90ZW5jeV9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5hY2Nlc3NfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScgJiYgc3RlcHMuY29tbWFuZF9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJwogICAgICAgIHJ1bjogcGlwIGluc3RhbGwgYW50aHJvcGljCgogICAgICAtIG5hbWU6IEdlbmVyYXRlIHJlc3BvbnNlCiAgICAgICAgaWQ6IGdlbmVyYXRlX3Jlc3BvbnNlCiAgICAgICAgaWY6IHN0ZXBzLmJvdF9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5sb2NrX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmlkZW1wb3RlbmN5X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmFjY2Vzc19jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5jb21tYW5kX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnCiAgICAgICAgdGltZW91dC1taW51dGVzOiAzCiAgICAgICAgZW52OgogICAgICAgICAgQU5USFJPUElDX0FQSV9LRVk6ICR7eyBzdGVwcy5zZWNyZXRzLm91dHB1dHMuQU5USFJPUElDX0FQSV9LRVkgfX0KICAgICAgICBydW46IHwKICAgICAgICAgIHB5dGhvbjMgPDwgJ1BZVEhPTl9FT0YnCiAgICAgICAgICBpbXBvcnQgb3MsIGpzb24sIHRpbWUsIHN5cwogICAgICAgICAgZnJvbSBhbnRocm9waWMgaW1wb3J0IEFudGhyb3BpYwoKICAgICAgICAgIE1BWF9SRVRSSUVTID0gMwogICAgICAgICAgQkFTRV9ERUxBWSA9IDIKICAgICAgICAgIENPTlRFWFRfTElNSVQgPSA0MDAwCgogICAgICAgICAgd2l0aCBvcGVuKG9zLmVudmlyb25bJ0dJVEhVQl9FVkVOVF9QQVRIX10pIGFzIGY6CiAgICAgICAgICAgICAgZXZlbnQgPSBqc29uLmxvYWQoZikKICAgICAgICAgIAogICAgICAgICAgYm9keSA9IGV2ZW50Wydjb21tZW50J11bJ2JvZHknXQogICAgICAgICAgdXNlciA9IGV2ZW50Wydjb21tZW50J11bJ3VzZXInXVsnbG9naW4nXQogICAgICAgICAgY2lkID0gZXZlbnRbJ2NvbW1lbnQnXVsnaWQnXQogICAgICAgICAgY21kID0gYm9keS5zdHJpcCgpLnNwbGl0KCdcbicpWzBdCiAgICAgICAgICBxdWVyeSA9IGJvZHlbbGVuKGNtZCk6XS5zdHJpcCgpIGlmIGxlbihib2R5KSA+IGxlbihjbWQpIGVsc2UgY21kCiAgICAgICAgICAKICAgICAgICAgICMgQnVkZ2V0IGd1YXJkOiB0cnVuY2F0ZSBxdWVyeQogICAgICAgICAgdHJ1bmNhdGVkID0gRmFsc2UKICAgICAgICAgIGlmIGxlbihxdWVyeSkgPiBDT05URVhUX0xJTUlUOgogICAgICAgICAgICAgIHF1ZXJ5ID0gcXVlcnlbOkNPTlRFWFRfTElNSVRdCiAgICAgICAgICAgICAgdHJ1bmNhdGVkID0gVHJ1ZQogICAgICAgICAgCiAgICAgICAgICBjbGllbnQgPSBBbnRocm9waWMoYXBpX2tleT1vcy5lbnZpcm9uWydBTlRIUk9QSUNfQVBJX0tFWSddKQogICAgICAgICAgCiAgICAgICAgICAjIFJldHJ5IGxvZ2ljIHdpdGggZXhwb25lbnRpYWwgYmFja29mZgogICAgICAgICAgZm9yIGF0dGVtcHQgaW4gcmFuZ2UoMSwgTUFYX1JFVFJJRVMgKyAxKToKICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgIHByaW50KGYiOjpub3RpY2U6OkxMTSByZXF1ZXN0IGF0dGVtcHQge2F0dGVtcHR9L3tNQVhfUkVUUklFU30iKQogICAgICAgICAgICAgICAgICBtc2cgPSBjbGllbnQubWVzc2FnZXMuY3JlYXRlKAogICAgICAgICAgICAgICAgICAgICAgbW9kZWw9J2NsYXVkZS1zb25uZXQtNC0yMDI1MDUxNCcsCiAgICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zPTgwMCwKICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzPVt7J3JvbGUnOiAndXNlcicsICdjb250ZW50JzogZidQcm9qZWN0IDM4IElzc3VlT3BzOiBAe3VzZXJ9IGFza2VkOiB7cXVlcnl9J31dCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgdGV4dCA9IG1zZy5jb250ZW50WzBdLnRleHQKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICMgU3VjY2VzcyAtIHByZXBhcmUgb3V0cHV0CiAgICAgICAgICAgICAgICAgIHRydW5jYXRpb25fbm90aWNlID0gJ1xuXG7imqDvuI8gQ29udGV4dCB0cnVuY2F0ZWQgdG8gNDAwMCBjaGFycycgaWYgdHJ1bmNhdGVkIGVsc2UgJycKICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gZicqKkxMTSBSZXNwb25zZSAodjQpKipcblxue3RleHR9e3RydW5jYXRpb25fbm90aWNlfVxuXG4tLS1cbipDb21tYW5kOiB7Y21kLnNwbGl0KClbMF19KlxuPCEtLSBQMzhfSURFTVBPVEVOQ1lfS0VZOiBjb21tZW50X3tjaWR9IC0tPicKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIHdpdGggb3Blbihvcy5lbnZpcm9uWydHSVRIVUJfRU5WJ10sICdhJykgYXMgZjoKICAgICAgICAgICAgICAgICAgICAgIGYud3JpdGUoZidMTE1fUkVTUE9OU0U8PEVPRlxue291dHB1dH1cbkVPRlxuJykKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIHByaW50KCc6Om5vdGljZTo6R2VuZXJhdGVkIHN1Y2Nlc3NmdWxseScpCiAgICAgICAgICAgICAgICAgIHN5cy5leGl0KDApCiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgcHJpbnQoZiI6OmVycm9yOjpBdHRlbXB0IHthdHRlbXB0fSBmYWlsZWQ6IHtzdHIoZSl9IikKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIGlmIGF0dGVtcHQgPCBNQVhfUkVUUklFUzoKICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ID0gQkFTRV9ERUxBWSAqKiBhdHRlbXB0CiAgICAgICAgICAgICAgICAgICAgICBwcmludChmIjo6bm90aWNlOjpSZXRyeWluZyBpbiB7ZGVsYXl9cy4uLiIpCiAgICAgICAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKGRlbGF5KQogICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiI6OmVycm9yOjpBbGwge01BWF9SRVRSSUVTfSBhdHRlbXB0cyBmYWlsZWQiKQogICAgICAgICAgICAgICAgICAgICAgc3lzLmV4aXQoMSkKICAgICAgICAgIFBZVEhPTl9FT0YKCiAgICAgIC0gbmFtZTogUG9zdCByZXNwb25zZQogICAgICAgIGlkOiBwb3N0X3Jlc3BvbnNlCiAgICAgICAgaWY6IHN0ZXBzLmJvdF9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5sb2NrX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmlkZW1wb3RlbmN5X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmFjY2Vzc19jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5jb21tYW5kX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnCiAgICAgICAgZW52OgogICAgICAgICAgR0hfVE9LRU46ICR7eyBnaXRodWIudG9rZW4gfX0KICAgICAgICBydW46IHwKICAgICAgICAgIGdoIGFwaSAtLW1ldGhvZCBQT1NUIC1IICJBY2NlcHQ6IGFwcGxpY2F0aW9uL3ZuZC5naXRodWIranNvbiIgL3JlcG9zLyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9pc3N1ZXMvMjQvY29tbWVudHMgLWYgYm9keT0iJExMTV9SRVNQT05TRSIKICAgICAgICAgIGVjaG8gIjo6bm90aWNlOjpQb3N0ZWQiCgogICAgICAtIG5hbWU6IFJlbGVhc2UgTG9jayBvbiBTdWNjZXNzCiAgICAgICAgaWQ6IHJlbGVhc2Vfc3VjY2VzcwogICAgICAgIGlmOiBzdWNjZXNzKCkgJiYgc3RlcHMuYm90X2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnICYmIHN0ZXBzLmxvY2tfY2hlY2sub3V0cHV0cy5za2lwID09ICdmYWxzZScKICAgICAgICBlbnY6CiAgICAgICAgICBHSF9UT0tFTjogJHt7IGdpdGh1Yi50b2tlbiB9fQogICAgICAgIHJ1bjogfAogICAgICAgICAgZ2ggYXBpIC0tbWV0aG9kIERFTEVURSAvcmVwb3MvJHt7IGdpdGh1Yi5yZXBvc2l0b3J5IH19L2lzc3Vlcy8yNC9sYWJlbHMvcHJvY2Vzc2luZyAyPi9kZXYvbnVsbCB8fCB0cnVlCiAgICAgICAgICBnaCBhcGkgLS1tZXRob2QgUE9TVCAvcmVwb3MvJHt7IGdpdGh1Yi5yZXBvc2l0b3J5IH19L2lzc3Vlcy8yNC9sYWJlbHMgLWYgbGFiZWxzW109ImNvbXBsZXRlIgogICAgICAgICAgZWNobyAiOjpub3RpY2U6OkxvY2sgcmVsZWFzZWQ6IGNvbXBsZXRlIgoKICAgICAgLSBuYW1lOiBSZWxlYXNlIExvY2sgb24gRmFpbHVyZQogICAgICAgIGlkOiByZWxlYXNlX2ZhaWx1cmUKICAgICAgICBpZjogZmFpbHVyZSgpICYmIHN0ZXBzLmJvdF9jaGVjay5vdXRwdXRzLnNraXAgPT0gJ2ZhbHNlJyAmJiBzdGVwcy5sb2NrX2NoZWNrLm91dHB1dHMuc2tpcCA9PSAnZmFsc2UnCiAgICAgICAgZW52OgogICAgICAgICAgR0hfVE9LRU46ICR7eyBnaXRodWIudG9rZW4gfX0KICAgICAgICBydW46IHwKICAgICAgICAgIGdoIGFwaSAtLW1ldGhvZCBERUxFVEUgL3JlcG9zLyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9pc3N1ZXMvMjQvbGFiZWxzL3Byb2Nlc3NpbmcgMj4vZGV2L251bGwgfHwgdHJ1ZQogICAgICAgICAgZ2ggYXBpIC0tbWV0aG9kIFBPU1QgL3JlcG9zLyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9pc3N1ZXMvMjQvbGFiZWxzIC1mIGxhYmVsc1tdPSJlcnJvciIKICAgICAgICAgIGVjaG8gIjo6bm90aWNlOjpMb2NrIHJlbGVhc2VkOiBlcnJvciIKCiAgICAgIC0gbmFtZTogUmVwb3J0IEZhaWx1cmUKICAgICAgICBpZjogfAogICAgICAgICAgYWx3YXlzKCkgJiYKICAgICAgICAgIGZhaWx1cmUoKSAmJgogICAgICAgICAgZ2l0aHViLmV2ZW50X25hbWUgPT0gJ2lzc3VlX2NvbW1lbnQnICYmCiAgICAgICAgICBnaXRodWIuZXZlbnQuaXNzdWUubnVtYmVyID09IDI0CiAgICAgICAgZW52OgogICAgICAgICAgR0hfVE9LRU46ICR7eyBnaXRodWIudG9rZW4gfX0KICAgICAgICBydW46IHwKICAgICAgICAgICMgRGV0ZXJtaW5lIGZhaWx1cmUgY2F1c2UKICAgICAgICAgIENBVVNFPSJVbmtub3duIGZhaWx1cmUiCiAgICAgICAgICAKICAgICAgICAgIGlmIFsgIiR7eyBzdGVwcy5jaGVja291dC5vdXRjb21lIH19IiA9PSAiZmFpbHVyZSIgXTsgdGhlbgogICAgICAgICAgICBDQVVTRT0iQ2hlY2tvdXQgZmFpbGVkIgogICAgICAgICAgZWxpZiBbICIke3sgc3RlcHMuYXV0aF9nY3Aub3V0Y29tZSB9fSIgPT0gImZhaWx1cmUiIF07IHRoZW4KICAgICAgICAgICAgQ0FVU0U9IkdDUCBhdXRoZW50aWNhdGlvbiBmYWlsZWQiCiAgICAgICAgICBlbGlmIFsgIiR7eyBzdGVwcy5zZWNyZXRzLm91dGNvbWUgfX0iID09ICJmYWlsdXJlIiBdOyB0aGVuCiAgICAgICAgICAgIENBVVNFPSJTZWNyZXQgcmV0cmlldmFsIGZhaWxlZCIKICAgICAgICAgIGVsaWYgWyAiJHt7IHN0ZXBzLnNldHVwX3B5dGhvbi5vdXRjb21lIH19IiA9PSAiZmFpbHVyZSIgXTsgdGhlbgogICAgICAgICAgICBDQVVTRT0iUHl0aG9uIHNldHVwIGZhaWxlZCIKICAgICAgICAgIGVsaWYgWyAiJHt7IHN0ZXBzLmluc3RhbGxfZGVwcy5vdXRjb21lIH19IiA9PSAiZmFpbHVyZSIgXTsgdGhlbgogICAgICAgICAgICBDQVVTRT0iRGVwZW5kZW5jeSBpbnN0YWxsYXRpb24gZmFpbGVkIgogICAgICAgICAgZWxpZiBbICIke3sgc3RlcHMuZ2VuZXJhdGVfcmVzcG9uc2Uub3V0Y29tZSB9fSIgPT0gImZhaWx1cmUiIF07IHRoZW4KICAgICAgICAgICAgQ0FVU0U9IkxMTSByZXF1ZXN0IGZhaWxlZCAoYWxsIHJldHJpZXMgZXhoYXVzdGVkKSIKICAgICAgICAgIGVsaWYgWyAiJHt7IHN0ZXBzLnBvc3RfcmVzcG9uc2Uub3V0Y29tZSB9fSIgPT0gImZhaWx1cmUiIF07IHRoZW4KICAgICAgICAgICAgQ0FVU0U9IkZhaWxlZCB0byBwb3N0IHJlc3BvbnNlIgogICAgICAgICAgZWxpZiBbICIke3sgc3RlcHMuYWNxdWlyZV9sb2NrLm91dGNvbWUgfX0iID09ICJmYWlsdXJlIiBdOyB0aGVuCiAgICAgICAgICAgIENBVVNFPSJGYWlsZWQgdG8gYWNxdWlyZSBsb2NrIgogICAgICAgICAgZmkKICAgICAgICAgIAogICAgICAgICAgUlVOX1VSTD0iJHt7IGdpdGh1Yi5zZXJ2ZXJfdXJsIH19LyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9hY3Rpb25zL3J1bnMvJHt7IGdpdGh1Yi5ydW5faWQgfX0iCiAgICAgICAgICBUSU1FU1RBTVA9JChkYXRlIC11ICslWS0lbS0lZFQlSDolTTolU1opCiAgICAgICAgICAKICAgICAgICAgIEZBSUxVUkVfQ09NTUVOVD0i4p2MICoqV29ya2Zsb3cgRmFpbGVkKioKCioqUnVuOioqICR7UlVOX1VSTH0KKipDYXVzZToqKiAke0NBVVNFfQoqKlRpbWU6KiogJHtUSU1FU1RBTV

P9Cgo8IS0tIFAzOF9GQUlMVVJFX1JFUE9SVDogcnVuXyR7eyBnaXRodWIucnVuX2lkIH19IC0tPiIKICAgICAgICAgIAogICAgICAgICAgZ2ggYXBpIC0tbWV0aG9kIFBPU1QgXAogICAgICAgICAgICAtSCAiQWNjZXB0OiBhcHBsaWNhdGlvbi92bmQuZ2l0aHViK2pzb24iIFwKICAgICAgICAgICAgL3JlcG9zLyR7eyBnaXRodWIucmVwb3NpdG9yeSB9fS9pc3N1ZXMvMjQvY29tbWVudHMgXAogICAgICAgICAgICAtZiBib2R5PSIkRkFJTFVSRV9DT01NRU5UIiB8fCBlY2hvICI6OmVycm9yOjpGYWlsZWQgdG8gcG9zdCBmYWlsdXJlIHJlcG9ydCIKICAgICAgICAgIAogICAgICAgICAgZWNobyAiOjpub3RpY2U6OkZhaWx1cmUgcmVwb3J0IHBvc3RlZCI=